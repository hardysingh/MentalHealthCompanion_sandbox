#importing packages
import csv
import matplotlib.pyplot as plt
file = open("sentiment.csv", "r")
import nltk
stopwords = nltk.corpus.stopwords.words('english')
reader = csv.reader(file)
#inputting name and date
name = input("Name: ")
date = input("Date: ")
words = []
x = []
y = []
i = 1
#making dict to be able to plot
dict = {
    'Terrible' : 1,
    'Bad' : 2,
    'Not that well' : 3,
    'Good' : 4,
    'Great' : 5 }
for row in reader:
    #tokenizing journal entry if name and date match input
    if row[1] == date and row[0] == name:
        words2 = nltk.word_tokenize(row[4])
        for word in words2:
            if word not in stopwords:
                words.append(word)
    #preparing x and y if name matches input
    if row[0] == name:
        x.append(i)
        i+=1
        y.append(dict[row[3]])
#checking positive or negative mood
pos = 0
neg = 0
for i in y:
    if i<3:
        neg+=1
    if i>3:
        pos+=1
if pos>neg:
    print(name, 'has been in a good mood.')
else:
    print(name, 'has been in a bad mood.')

#longest negative mood period
max = 0
s= 0
for i in y:
    if i<3:
        s+=1
    else:
        if s>max:
            max = s
print (max, 'is the longest stretch of a negative mood for', name)

#printing frequency distribution and plotting
fd = nltk.FreqDist(words)
print(fd.most_common(3))
plt.plot(x, y, color='green', linestyle='dashed', linewidth = 3,
         marker='o', markerfacecolor='blue', markersize=12)

plt.show()
file.close()
